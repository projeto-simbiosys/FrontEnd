<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/icone logo.png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>simbiosys</title>
</head>

<body>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>

  <!-- Menu de Acessibilidade -->
  <div id="acessibilidade-menu" class="fechado" aria-label="Menu de Acessibilidade">
    <button id="acessibilidade-toggle" aria-label="Abrir menu de acessibilidade"></button>
    <div id="acessibilidade-conteudo">
      <strong>Ferramentas de acessibilidade</strong>
      <button onclick="aumentarFonte()">
        <span style="margin-right:8px;">‚ûï</span>Aumentar texto
      </button>
      <button onclick="diminuirFonte()">
        <span style="margin-right:8px;">‚ûñ</span>Diminuir texto
      </button>
      <button onclick="alternarContraste()">
        <span style="margin-right:8px;">üåó</span>Contraste
      </button>
      <button onclick="resetarAcessibilidade()">
        <span style="margin-right:8px;">‚ôªÔ∏è</span>Resetar
      </button>
    </div>
  </div>

  <style>
    /* === MENU DE ACESSIBILIDADE === */
    #acessibilidade-menu {
      position: fixed;
      top: 100px;
      left: 20px;
      z-index: 9999;
      cursor: grab;
      user-select: none;
    }

    #acessibilidade-menu.dragging {
      opacity: 0.85;
      cursor: grabbing;
    }

    #acessibilidade-toggle {
      width: 48px;
      height: 48px;
      background: #b68cfd;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(44, 62, 80, 0.10);
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-size: 2rem;
      transition: background 0.2s;
    }

    #acessibilidade-toggle::before {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      content: "";
      display: block;
      background-image: url('https://cdn-icons-png.flaticon.com/512/1512/1512642.png');
      background-size: contain;
      background-repeat: no-repeat;
      margin: auto;
    }

    #acessibilidade-menu.aberto #acessibilidade-toggle::before {
      content: "";
      display: block;
      width: 28px;
      height: 28px;
      background-image: url('https://cdn-icons-png.flaticon.com/512/1512/1512642.png');
      background-size: contain;
      background-repeat: no-repeat;
      margin: auto;
    }

    #acessibilidade-conteudo {
      display: none;
      margin-top: 10px;
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(44, 62, 80, 0.10);
      padding: 18px 16px 12px 16px;
      min-width: 180px;
      font-family: 'Segoe UI', Arial, sans-serif;
      animation: fadeIn 0.2s;
    }

    #acessibilidade-menu.aberto #acessibilidade-conteudo {
      display: block;
    }

    #acessibilidade-conteudo strong {
      display: block;
      margin-bottom: 10px;
      font-size: 1.1rem;
      color: #7c3aed;
      text-align: center;
    }

    #acessibilidade-conteudo button {
      margin: 4px 0;
      padding: 7px 0;
      border: none;
      border-radius: 6px;
      background: #ede9fe;
      color: #7c3aed;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      width: 100%;
      transition: background 0.2s, color 0.2s;
    }

    #acessibilidade-conteudo button:hover,
    #acessibilidade-conteudo button:focus {
      background: #7c3aed;
      color: #fff;
    }

    /* === MODO ALTO CONTRASTE === */
    /* Ativa contraste para todos os componentes globalmente (sem exclus√µes).
       Ajusta imagens e SVGs tamb√©m para garantir legibilidade uniforme. */
    body.alto-contraste,
    body.alto-contraste * {
      background-color: #0f1724 !important; /* dark slate */
      color: #f8fafc !important; /* off-white */
      border-color: #ffca77 !important; /* soft amber accent */
      box-shadow: none !important;
    }

  
    body.alto-contraste img {
      filter: grayscale(100%) contrast(1.05) brightness(0.9) !important;
      background-color: transparent !important;
    }

    /* SVGs: force stroke/fill to follow current text color para consist√™ncia */
    body.alto-contraste svg {
      stroke: currentColor !important;
      fill: currentColor !important;
      color: inherit !important;
    }

    /* Override elements inside inline SVGs that have hard-coded fill/stroke attributes */
    body.alto-contraste svg [fill]:not([fill="none"]) {
      fill: currentColor !important;
    }

    body.alto-contraste svg [stroke]:not([stroke="none"]) {
      stroke: currentColor !important;
    }

    /* Override inline style attributes like style="fill:#..." or style="stroke:#..." */
    body.alto-contraste svg [style*="fill"] {
      fill: currentColor !important;
    }

    body.alto-contraste svg [style*="stroke"] {
      stroke: currentColor !important;
    }

    /* Replace gradient stop colors so gradients also adapt to currentColor */
    body.alto-contraste svg stop {
      stop-color: currentColor !important;
      stop-opacity: 1 !important;
    }

    /* Ensure all SVG children inherit color where possible */
    body.alto-contraste svg * {
      color: inherit !important;
    }

    
    body.alto-contraste img[src$=".svg"],
    body.alto-contraste object[type="image/svg+xml"],
    body.alto-contraste embed[type="image/svg+xml"] {
      filter: grayscale(100%) contrast(1.15) brightness(0.95) !important;
      -webkit-filter: grayscale(100%) contrast(1.15) brightness(0.95) !important;
      background-color: transparent !important;
    }

    /* Menu de acessibilidade e painel: manter contraste consistente */
    body.alto-contraste #acessibilidade-menu {
      background: transparent !important;
    }

    body.alto-contraste #acessibilidade-toggle {
      background: #ffca77 !important; /* amber */
      color: #0f1724 !important;
      outline-offset: 2px;
    }

    body.alto-contraste #acessibilidade-conteudo {
      background: #111827 !important; /* dark panel */
      border: 1px solid #ffca77 !important;
    }

    body.alto-contraste #acessibilidade-conteudo strong {
      color: #ffca77 !important;
    }

    body.alto-contraste #acessibilidade-conteudo button {
      background: #ffca77 !important;
      color: #0f1724 !important;
      border: 1px solid #0f1724 !important;
    }

    body.alto-contraste #acessibilidade-conteudo button:hover,
    body.alto-contraste #acessibilidade-conteudo button:focus {
      background: #ffffff !important;
      color: #ffca77 !important;
      outline: 3px solid #ffca77 !important;
    }

    /* Melhorar visibilidade de foco para navega√ß√£o por teclado */
    body.alto-contraste a:focus,
    body.alto-contraste button:focus,
    body.alto-contraste input:focus,
    body.alto-contraste select:focus,
    body.alto-contraste textarea:focus {
      outline: 3px solid #ffca77 !important;
      outline-offset: 2px !important;
      background-color: #111827 !important;
      color: #f8fafc !important;
    }

    /* === CARDS E BOXES === */
    body.alto-contraste .card,
    body.alto-contraste .box,
    body.alto-contraste .indicador {
      background: #0b1220 !important; /* slightly lighter than pure black */
      border: 2px solid #ffca77 !important; /* match soft amber accent */
      color: #f8fafc !important;
    }

    body.alto-contraste .recharts-cartesian-axis-tick text,
    body.alto-contraste .recharts-legend-item-text {
      fill: #f8fafc !important;
      font-weight: bold;
    }


    body.alto-contraste .recharts-bar-rectangle.ptr path,
    body.alto-contraste .recharts-line.ptr path,
    body.alto-contraste .recharts-area.ptr path,
    body.alto-contraste .recharts-pie-sector.ptr path {
      fill: #ffca77 !important; /* use amber for charts */
      stroke: #ffca77 !important;
    }

    /* Cursos */
    body.alto-contraste .recharts-bar-rectangle.cursos path,
    body.alto-contraste .recharts-line.cursos path,
    body.alto-contraste .recharts-area.cursos path,
    body.alto-contraste .recharts-pie-sector.cursos path {
      fill: #FFD700 !important;
      stroke: #FFD700 !important;
    }

    /* Documentos */
    body.alto-contraste .recharts-bar-rectangle.documentos path,
    body.alto-contraste .recharts-line.documentos path,
    body.alto-contraste .recharts-area.documentos path,
    body.alto-contraste .recharts-pie-sector.documentos path {
      fill: #FF00FF !important;
      stroke: #FF00FF !important;
    }

    /* Relat√≥rios */
    body.alto-contraste .recharts-bar-rectangle.relatorios path,
    body.alto-contraste .recharts-line.relatorios path,
    body.alto-contraste .recharts-area.relatorios path,
    body.alto-contraste .recharts-pie-sector.relatorios path {
      fill: #00FF00 !important;
      stroke: #00FF00 !important;
    }

    /* Ajuste bordas de setores */
    body.alto-contraste .recharts-pie-sector path {
      stroke-width: 2px !important;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>

  <script>
    let tamanhoFonte = 100;

    function aumentarFonte() {
      tamanhoFonte += 10;
      document.body.style.fontSize = tamanhoFonte + '%';
    }

    function diminuirFonte() {
      if (tamanhoFonte > 50) {
        tamanhoFonte -= 10;
        document.body.style.fontSize = tamanhoFonte + '%';
      }
    }

    function alternarContraste() {
      document.body.classList.toggle('alto-contraste');
    }

    function resetarAcessibilidade() {
      tamanhoFonte = 100;
      document.body.style.fontSize = '';
      document.body.classList.remove('alto-contraste');
    }

    const menu = document.getElementById('acessibilidade-menu');
    const toggle = document.getElementById('acessibilidade-toggle');
    menu.classList.add('fechado');
    toggle.addEventListener('click', function () {
      menu.classList.toggle('aberto');
      menu.classList.toggle('fechado');
      if (menu.classList.contains('aberto')) {
        toggle.setAttribute('aria-label', 'Fechar menu de acessibilidade');
      } else {
        toggle.setAttribute('aria-label', 'Abrir menu de acessibilidade');
      }
    });

    // Arrastar o menu
    let isDragging = false;
    let offsetX, offsetY;

    menu.addEventListener('mousedown', function (e) {
      if (e.target === menu || e.target === toggle) {
        isDragging = true;
        menu.classList.add('dragging');
        offsetX = e.clientX - menu.getBoundingClientRect().left;
        offsetY = e.clientY - menu.getBoundingClientRect().top;
        document.body.style.userSelect = 'none';
      }
    });

    document.addEventListener('mousemove', function (e) {
      if (isDragging) {
        let x = e.clientX - offsetX;
        let y = e.clientY - offsetY;
        x = Math.max(0, Math.min(window.innerWidth - menu.offsetWidth, x));
        y = Math.max(0, Math.min(window.innerHeight - menu.offsetHeight, y));
        menu.style.left = x + 'px';
        menu.style.top = y + 'px';
      }
    });

    document.addEventListener('mouseup', function () {
      if (isDragging) {
        isDragging = false;
        menu.classList.remove('dragging');
        document.body.style.userSelect = '';
      }
    });

    menu.addEventListener('touchstart', function (e) {
      if (e.target === menu || e.target === toggle) {
        isDragging = true;
        menu.classList.add('dragging');
        const touch = e.touches[0];
        offsetX = touch.clientX - menu.getBoundingClientRect().left;
        offsetY = touch.clientY - menu.getBoundingClientRect().top;
      }
    });

    document.addEventListener('touchmove', function (e) {
      if (isDragging) {
        const touch = e.touches[0];
        let x = touch.clientX - offsetX;
        let y = touch.clientY - offsetY;
        x = Math.max(0, Math.min(window.innerWidth - menu.offsetWidth, x));
        y = Math.max(0, Math.min(window.innerHeight - menu.offsetHeight, y));
        menu.style.left = x + 'px';
        menu.style.top = y + 'px';
      }
    });

    document.addEventListener('touchend', function () {
      if (isDragging) {
        isDragging = false;
        menu.classList.remove('dragging');
      }
    });
  </script>

  <!-- VLibras Widget -->
  <div vw class="enabled">
    <div vw-access-button class="active"></div>
    <div vw-plugin-wrapper>
      <div class="vw-plugin-top-wrapper"></div>
    </div>
  </div>

  <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
  <script>
    new window.VLibras.Widget('https://vlibras.gov.br/app');
  </script>
</body>

</html>
